<div class="message" [ngClass]="messageClasses">
  <!-- Layout normal pour user et assistant -->
  <ng-container *ngIf="!isSimplified">
    <!-- En-tête avec speaker et actions -->
    <div class="message-header">
      <div class="speaker" *ngIf="shouldShowSpeaker">
        {{ message.speaker }}
      </div>
      
      <div class="actions" *ngIf="shouldShowActions">
        <button 
          class="action-btn" 
          (click)="onPlay()"
          title="Play message"
        >
          ▶️
        </button>
        
        <button 
          class="action-btn" 
          (click)="onCopy()"
          title="Copy message"
        >
          📋
        </button>
      </div>
    </div>
    
    <!-- Contenu -->
    <div class="content markdown-content" [innerHTML]="renderedContent"></div>
  </ng-container>
  
  <!-- Layout simplifié pour les autres types -->
  <ng-container *ngIf="isSimplified">
    <div class="simple-content markdown-content">
      <span [innerHTML]="renderedContent"></span>
      <a *ngIf="eventLink" [href]="eventLink" target="_blank" class="event-link">view</a>
    </div>
  </ng-container>
</div>