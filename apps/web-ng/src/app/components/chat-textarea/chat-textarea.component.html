<div class="chat-input-container">
  <div class="input-wrapper">
    <textarea
      #messageInput
      class="message-input"
      [(ngModel)]="message"
      placeholder="Type your message here..."
      (keydown)="onKeyDown($event)"
      [disabled]="isDisabled"
      rows="3"
    ></textarea>
    
    <div class="input-actions">
      <button
        class="voice-btn"
        [class.recording]="isRecording"
        (mousedown)="onVoiceButtonMouseDown($event)"
        (mouseup)="onVoiceButtonMouseUp()"
        (mouseleave)="onVoiceButtonMouseLeave()"
        (touchstart)="onVoiceButtonTouchStart($event)"
        (touchend)="onVoiceButtonTouchEnd($event)"
        (keydown)="onVoiceButtonKeyDown($event)"
        (keyup)="onVoiceButtonKeyUp($event)"
        tabindex="0"
        title="Maintenir clic souris, touch, ou barre espace pour parler"
      >
        {{ isRecording ? 'ðŸ”´' : 'ðŸŽ¤' }}
      </button>
      
      <button
        class="send-btn"
        (click)="sendMessage()"
        [disabled]="!message.trim() || isDisabled"
        title="Send message"
      >
        Send
      </button>
    </div>
  </div>
  
  <div *ngIf="isRecording" class="recording-indicator">
    <span class="recording-dot"></span>
    Recording... Release to stop
  </div>
</div>