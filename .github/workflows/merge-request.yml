name: Merge Request

on:
  pull_request:
    types: [opened, synchronize]
    branches: [ master ]

env:
  NX_MAX_WORKERS: 4
  MASTER_BRANCH: master

jobs:
  init:
    uses: ./.github/workflows/init-repo.yml

  test:
    needs: [init]
    uses: ./.github/workflows/test.yml
    with:
      is_merge_request: true
      base_ref: ${{ github.base_ref }}